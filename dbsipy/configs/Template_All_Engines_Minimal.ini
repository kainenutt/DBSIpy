# Minimal, engine-agnostic template config.

[INPUT]
# Absolute paths to input files
dwi_file =
mask_file =
bval_file =
bvec_file =

[OPTIMIZER]
# DBSI/DBSI-IA Optimization Hyperparameters
step_1_lr = 0.002
step_1_epochs = 100
step_1_loss_fn = mse
step_2_lr = 0.001
step_2_epochs = 250
step_2_loss_fn = mse
#Early-Stopping Parameters (DBSI/DSBI-IA only)
step_2_patience = 50
step_2_min_delta = 5e-4

[DEBUG]
; Terminal/log verbosity mode: quiet | standard | verbose | debug
output_mode = standard

[GLOBAL]
# Available Model Engines: DBSI, (DBSI-)IA, DTI, NODDI
model_engine = IA
max_group_number = 1
# Minimum anisotropic signal threshold
fiber_threshold = 0.02
# Set of outputs to generate: default = minimal set; expanded = additional maps, typically used for debugging
output_map_set = default
# Maximum b-value (s/mm^2) to use for DTI fitting routine
# Note: DTI computed by WLS and saved to output directory for comparison if model_engine != DTI
dti_bval_cut = 1500
# Signal normalization options are:
# auto: model-dependent,
# max : normalize to max signal in voxel,
# b0  : normalize to mean b=0 signal in each voxel
# minb: normalize to signal in minimum b-value volume for each voxel (fallback for b0 option)
# none: fit the raw signal without normalization
signal_normalization = auto
# (For DBSI/DBSI-IA Only): Fit S0 as a learnable model parameter? Defaults to False.
learnable_s0 = False

[STEP_1]
# Threshold to separate anisotropic signals in step 1 of DBSI/DBSI-IA
angle_threshold = 40
# Paths to DBSI/DBSI-IA step 1 basis sets (relative to dbsipy/configs/)
angle_basis = BasisSets/Human_Brain_InVivo/angle_basis.csv
iso_basis = BasisSets/Human_Brain_InVivo/iso_basis.csv
# DBSI step 1 axial/radial diffusivity for bundle grouping (units: mm^2/s)
step_1_axial = 0.0017
step_1_radial = 0.0002

[STEP_2]
# Paths to DBSI/DBSI-IA step 2 basis sets (relative to dbsipy/configs/)
step_2_axials = BasisSets/Human_Brain_InVivo/axial_basis.csv
step_2_radials = BasisSets/Human_Brain_InVivo/radial_basis.csv
# Intra-axonal radial diffusivity threshold for DBSI-IA (units: mm^2/s)
intra_threshold = 0.0001

[ISOTROPIC]
# Isotropic thresholds for DBSI/DBSI-IA (units: mm^2/s)
# Note: highly_restricted_threshold is optional.
highly_restricted_threshold =
restricted_threshold = 3e-4
free_water_threshold = 3e-3

[NODDI]
# NODDI Optimizer Settings
noddi_lr = 0.002
noddi_epochs = 200
# Fixed Parameters (typical literature values)
# Units: mmÂ²/s
noddi_d_ic = 0.0017
noddi_d_iso = 0.003
# Use tortuosity constraint for extra-cellular diffusion?
noddi_use_tortuosity = True

[DTI]
# Available DTI fit methods: WLS, OLS, ADAM
# WLS/OLS are fast linear fits, ADAM runs DBISpy-style iterative optimizer
dti_fit_method = ADAM
# DTI-ADAM parameters (ignored for WLS/OLS)
dti_lr = 0.002
dti_epochs = 150

[DEVICE]
# Compute device selection
# - auto: use cuda if available else cpu
# - cuda: request GPU (falls back to cpu if unavailable)
# - cpu: force CPU
DEVICE = auto
HOST = cpu
