[INPUT]
dwi_file = 
mask_file = 
bval_file = 
bvec_file = 

[DEBUG]
verbose = False

[GLOBAL]
model_engine = NODDI
; model_engine options: DBSI, IA, DTI, or NODDI
; For NODDI analysis, configure [NODDI] section below
; For DTI-only analysis, set model_engine = DTI and configure [DTI] section below
; output_map_set: which parameter-map set(s) to allocate + save
;   Options: default | expanded (legacy: both)
;   Default: both (preserves legacy behavior)
;   Tip: use 'default' to reduce output files and save time
output_map_set = default
; dti_bval_cut: Maximum b-value (s/mm²) for DTI fitting (for comparison)
;   Default: 1500 (standard low-b DTI cutoff)
;   Higher values include additional shells; 15000 uses all b-values (nonstandard for DTI)
dti_bval_cut = 1500
; signal_normalization: how to scale the DWI prior to fitting
;   Options: auto | max | b0 | minb | none
;   auto => DBSI/IA/NODDI: max (attenuation); DTI: none (raw)
signal_normalization = auto
; learnable_s0: reserved for DBSI/IA; ignored for NODDI
learnable_s0 = False

[NODDI]
# NODDI Optimizer Settings
noddi_lr = 0.001
noddi_epochs = 500

# Fixed Parameters (typical literature values)
# Units: mm²/s (will be converted to µm²/ms in output)
noddi_d_ic = 0.0017
noddi_d_iso = 0.003
noddi_use_tortuosity = True

[DTI]
; dti_fit_method: WLS | OLS | ADAM
;   WLS/OLS are fast linear fits.
;   ADAM runs an iterative optimizer (uses dti_lr and dti_epochs below).
dti_fit_method = WLS
; dti_lr: ADAM learning rate (ignored for WLS/OLS)
dti_lr = 0.01
; dti_epochs: ADAM epochs (ignored for WLS/OLS)
dti_epochs = 200

# Notes:
# - noddi_d_ic: Intra-cellular diffusivity (parallel to neurites)
# - noddi_d_iso: Isotropic diffusivity (free water/CSF)  
# - noddi_use_tortuosity: Apply constraint d_ec_perp = d_ec_par * (1 - v_ic)

# Data Requirements
# NODDI works best with multi-shell data (2+ b-values)
# Minimum: Single-shell at b >= 1000 s/mm²
# Recommended: b = 1000 and b = 2000 s/mm² with 30+ directions each

[DEVICE]
# GPU acceleration (highly recommended for NODDI)
# NODDI is computationally intensive - GPU provides 10-50x speedup
DEVICE = auto    # Options: 'auto', 'cuda' or 'cpu'
HOST = cpu
